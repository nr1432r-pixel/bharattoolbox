<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Image Tools | Bharat Toolbox</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --primary:#4f46e5;
  --bg:#eef2ff;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
}

*{box-sizing:border-box}

body{
  background:linear-gradient(135deg,#eef2ff,#f8fafc);
  font-family:system-ui,-apple-system,Segoe UI;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* CARD */
.card{
  width:380px;
  background:var(--card);
  padding:22px;
  border-radius:18px;
  box-shadow:0 25px 50px rgba(0,0,0,.15);
  text-align:center;
}

/* TOP BAR */
.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}
.home-btn{
  text-decoration:none;
  font-size:13px;
  padding:6px 12px;
  border-radius:999px;
  background:#e0e7ff;
  color:#1e3a8a;
  font-weight:600;
}
.brand{
  font-size:12px;
  color:var(--muted);
}

h1{
  margin:6px 0 4px;
}
p{
  font-size:14px;
  color:var(--muted);
}

input{
  width:100%;
  padding:10px;
  margin:14px 0;
  border-radius:10px;
  border:1px solid #c7d2fe;
}

/* BUTTONS */
.btn-group button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:12px;
  background:var(--primary);
  color:white;
  font-size:15px;
  cursor:pointer;
  font-weight:600;
}
.btn-group button:hover{opacity:.9}

canvas{display:none}

/* LOADER */
#loader{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  z-index:999;
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}
.spinner{
  width:60px;
  height:60px;
  border:6px solid #ddd;
  border-top:6px solid var(--primary);
  border-radius:50%;
  animation:spin 1s linear infinite;
}
#loader p{
  color:white;
  margin-top:12px;
  font-size:16px;
}
@keyframes spin{to{transform:rotate(360deg)}}

.footer{
  margin-top:12px;
  font-size:12px;
  color:var(--muted);
}
</style>
</head>

<body>

<!-- LOADER -->
<div id="loader">
  <div class="spinner"></div>
  <p>Processing image‚Ä¶</p>
</div>

<div class="card">

  <!-- TOP -->
  <div class="top">
    <a href="/" class="home-btn">üè† Home</a>
    <div style="font-size:12px;color:#6b7280">üáÆüá≥ Bharat Toolbox</div>
  </div>

  <h1>üñº Image Tools</h1>
  <p>Compress ‚Ä¢ Resize ‚Ä¢ Convert ‚Ä¢ Rotate</p>

  <input type="file" id="imageInput" accept="image/*">

  <div class="btn-group">
    <button onclick="compress()">üóú Compress Image</button>
    <button onclick="resize()">üìê Resize 50%</button>
    <button onclick="convert()">üîÑ Convert to WEBP</button>
    <button onclick="rotate()">‚§µ Rotate 90¬∞</button>
  </div>

  <canvas id="canvas"></canvas>

  <div class="footer">Free ‚Ä¢ Offline ‚Ä¢ Secure</div>
</div>

<script>
const input = document.getElementById("imageInput");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const loader = document.getElementById("loader");

let img=new Image(),ready=false;

input.addEventListener("change",()=>{
  if(!input.files.length)return;
  ready=false;
  img=new Image();
  img.src=URL.createObjectURL(input.files[0]);
  img.onload=()=>ready=true;
});

function show(){loader.style.display="flex"}
function hide(){loader.style.display="none"}

function process(type){
  if(!ready)return alert("Pehle image select karo");
  show();

  setTimeout(()=>{
    ctx.setTransform(1,0,0,1,0,0);

    if(type==="compress"){
      canvas.width=img.width;
      canvas.height=img.height;
      ctx.drawImage(img,0,0);
      exportImg("compressed.jpg","image/jpeg",0.7);
    }

    if(type==="resize"){
      canvas.width=img.width/2;
      canvas.height=img.height/2;
      ctx.drawImage(img,0,0,canvas.width,canvas.height);
      exportImg("resized.png","image/png");
    }

    if(type==="convert"){
      canvas.width=img.width;
      canvas.height=img.height;
      ctx.drawImage(img,0,0);
      exportImg("converted.webp","image/webp",0.8);
    }

    if(type==="rotate"){
      canvas.width=img.height;
      canvas.height=img.width;
      ctx.translate(canvas.width/2,canvas.height/2);
      ctx.rotate(Math.PI/2);
      ctx.drawImage(img,-img.width/2,-img.height/2);
      exportImg("rotated.png","image/png");
    }
  },120);
}

function exportImg(name,type,q=1){
  canvas.toBlob(b=>{
    const a=document.createElement("a");
    a.href=URL.createObjectURL(b);
    a.download=name;
    a.click();
    hide();
  },type,q);
}

function compress(){process("compress")}
function resize(){process("resize")}
function convert(){process("convert")}
function rotate(){process("rotate")}
</script>

</body>

</html>
