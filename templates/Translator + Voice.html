<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Translator + Voice</title>

<style>
body{
  background:#eef1ff;
  font-family:Arial, sans-serif;
  display:flex;
  justify-content:center;
  padding-top:40px;
}
.box{
  background:white;
  width:420px;
  padding:20px;
  border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.2);
}
textarea,select,button{
  width:100%;
  margin-top:10px;
  padding:10px;
  font-size:15px;
}
textarea{height:90px}
button{
  background:#4f46e5;
  color:white;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
button:hover{
  background:#3730a3;
}
.row{
  display:flex;
  gap:10px;
}
audio{
  width:100%;
  margin-top:10px;
}
.back{
  text-align:center;
  margin-top:12px;
}
.back a{
  text-decoration:none;
  font-weight:bold;
  color:#2563eb;
}
</style>
</head>

<body>

<div class="box">
<h2>üåç Translator + üîä Voice</h2>

<textarea id="input" placeholder="Enter text here">hello</textarea>

<div class="row">
  <select id="source">
    <option value="auto">Auto</option>
    <option value="en">English</option>
    <option value="hi">Hindi</option>
    <option value="ta">Tamil</option>
    <option value="or">Odia</option>
    <option value="fr">French</option>
    <option value="de">German</option>
    <option value="es">Spanish</option>
    <option value="ar">Arabic</option>
    <option value="ru">Russian</option>
    <option value="ja">Japanese</option>
  </select>

  <select id="target">
    <option value="hi">Hindi</option>
    <option value="en">English</option>
    <option value="ta">Tamil</option>
    <option value="or">Odia</option>
    <option value="fr">French</option>
    <option value="de">German</option>
    <option value="es">Spanish</option>
    <option value="ar">Arabic</option>
    <option value="ru">Russian</option>
    <option value="ja">Japanese</option>
  </select>
</div>

<textarea id="output" placeholder="Translated text"></textarea>

<button onclick="translateText()">Translate</button>
<button onclick="voice()">Play / Download Voice</button>

<audio id="player" controls></audio>

<div class="back">
  <a href="/">‚¨Ö Home</a>
</div>
</div>

<script>
async function translateText(){
    const text = document.getElementById("input").value;
    const source = document.getElementById("source").value;
    const target = document.getElementById("target").value;

    const res = await fetch("/translate", {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({
            text: text,
            source: source,
            target: target
        })
    });

    const data = await res.json();
    document.getElementById("output").value = data.translated;
}

async function voice(){
  const res = await fetch("/voice",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({
      text: document.getElementById("output").value,
      lang: document.getElementById("target").value
    })
  });

  const data = await res.json();

  if(data.file){
    const player = document.getElementById("player");
    player.src = "/audio/" + data.file;
    player.play();
  } else {
    alert("Voice failed");
  }
}

</script>


</body>
</html>
